[pytest]
# Only collect tests from the canonical locations when run from repo root
# This prevents stray root-level test_*.py from being discovered accidentally.
testpaths = 
    backend/tests
    integration_tests

# Coverage for the FastAPI app package
addopts = --cov=app --cov-report=term-missing:skip-covered --cov-report=xml:coverage.xml

# Ensure the app package is importable when running from repo root
pythonpath = 
    backend
    backend/app

filterwarnings = ignore::DeprecationWarning

markers =
    integration: marks tests as integration (deselect with '-m "not integration"')

; Skip integration tests by default unless RUN_INTEGRATION_TESTS=1
; You can run them explicitly: `-m integration` or set the env var.
; This uses pytest's -k/markers behavior at invocation time.
